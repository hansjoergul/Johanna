<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2c3e50">
    <title>Johanna</title>
    
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #ff8fa3;       /* Sanftes Pink */
            --accent: #a29bfe;        /* Lila Akzent */
            --glass: rgba(255, 255, 255, 0.15);
            --glass-solid: rgba(25, 25, 35, 0.6); 
            --text: #ffffff;
            --overlay: rgba(0, 0, 0, 0.4); /* Dunkleres Overlay f√ºr bessere Lesbarkeit */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Quicksand', sans-serif;
            user-select: none;
        }

        body {
            /* Fallback Farbe + Bild */
            background-color: #2c3e50;
            background-image: linear-gradient(var(--overlay), var(--overlay)), url('bild.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }

        /* --- BACKGROUND ANIMATION --- */
        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .heart {
            position: absolute;
            color: rgba(255, 192, 203, 0.3);
            animation: floatUp linear infinite;
        }
        @keyframes floatUp {
            0% { transform: translateY(100vh) scale(0.5); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        /* --- SCREENS --- */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: opacity 0.5s ease, transform 0.5s ease;
            display: flex;
            flex-direction: column;
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
            transform: scale(1.1);
        }

        /* --- 1. PIN SCREEN (iOS Style) --- */
        #pin-screen {
            z-index: 100;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(0,0,0,0.4);
            align-items: center;
            justify-content: center;
        }

        .pin-wrapper {
            width: 100%;
            max-width: 320px;
            text-align: center;
            padding-bottom: 50px;
        }

        .pin-title {
            font-size: 1.2rem;
            margin-bottom: 20px;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .pin-dots {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .pin-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            border: 1px solid white;
            background: transparent;
            transition: 0.2s;
        }
        .pin-dot.filled { background: white; }

        .numpad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px 25px; /* Zeile Spalte */
            justify-items: center;
        }

        .key {
            width: 75px;
            height: 75px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.0);
            font-size: 1.8rem;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
            backdrop-filter: blur(5px);
        }
        .key:active { background: rgba(255,255,255,0.4); }

        /* --- 2. MAIN APP --- */
        #app-screen {
            z-index: 10;
            overflow-y: auto;
            padding: 20px;
            padding-top: 50px; /* Notch Area */
            align-items: stretch;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.8);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            object-fit: cover;
        }

        .greeting h1 {
            font-family: 'Nunito', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        .greeting p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Widgets Styles */
        .widget {
            background: var(--glass);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 22px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        .w-title {
            text-transform: uppercase;
            font-size: 0.75rem;
            opacity: 0.7;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: block;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }

        /* Detail Grid (Alter) */
        .age-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            text-align: center;
        }
        .age-val {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Nunito', sans-serif;
            display: block;
            margin-bottom: 2px;
        }
        .age-lbl { font-size: 0.7rem; opacity: 0.8; }

        /* Stats Rows (Gesamt) */
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
            font-size: 0.95rem;
        }
        .stat-row:last-child { border: none; }
        .highlight { font-weight: 700; color: #ffbfcd; }

        /* Progress Bars */
        .event-box { margin-bottom: 15px; }
        .event-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 0.9rem;
        }
        .progress-track {
            height: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .fill-bday { background: linear-gradient(90deg, #f6d365, #fda085); }
        .fill-name { background: linear-gradient(90deg, #84fab0, #8fd3f4); }

    </style>
</head>
<body>

    <div class="hearts-bg" id="bg-animation"></div>

    <div id="pin-screen" class="screen">
        <div class="pin-wrapper">
            <div style="font-size:3rem; margin-bottom:10px;">üîí</div>
            <div class="pin-title">Code eingeben</div>
            
            <div class="pin-dots">
                <div class="pin-dot" id="d1"></div>
                <div class="pin-dot" id="d2"></div>
                <div class="pin-dot" id="d3"></div>
                <div class="pin-dot" id="d4"></div>
            </div>

            <div class="numpad">
                <div class="key" onclick="tapPin(1)">1</div>
                <div class="key" onclick="tapPin(2)">2</div>
                <div class="key" onclick="tapPin(3)">3</div>
                <div class="key" onclick="tapPin(4)">4</div>
                <div class="key" onclick="tapPin(5)">5</div>
                <div class="key" onclick="tapPin(6)">6</div>
                <div class="key" onclick="tapPin(7)">7</div>
                <div class="key" onclick="tapPin(8)">8</div>
                <div class="key" onclick="tapPin(9)">9</div>
                <div class="key" style="background:transparent; border:none;"></div>
                <div class="key" onclick="tapPin(0)">0</div>
                <div class="key" style="background:transparent; border:none; font-size:1rem;" onclick="delPin()">‚å´</div>
            </div>
        </div>
    </div>

    <div id="app-screen" class="screen hidden">
        
        <div class="profile-header">
            <img src="icon.png" class="avatar" alt="J">
            <div class="greeting">
                <h1>Johanna</h1>
                <p>Willkommen zu Hause ‚ù§Ô∏è</p>
            </div>
        </div>

        <div class="widget">
            <span class="w-title">Alter (Exakt)</span>
            <div class="age-grid">
                <div><span class="age-val" id="y">0</span><span class="age-lbl">Jahre</span></div>
                <div><span class="age-val" id="m">0</span><span class="age-lbl">Monate</span></div>
                <div><span class="age-val" id="w">0</span><span class="age-lbl">Wochen</span></div>
                <div><span class="age-val" id="d">0</span><span class="age-lbl">Tage</span></div>
            </div>
        </div>

        <div class="widget">
            <span class="w-title">Statistik (Gesamt)</span>
            <div class="stat-row">
                <span>Gesamt Monate</span>
                <span class="highlight" id="total-m">0</span>
            </div>
            <div class="stat-row">
                <span>Gesamt Wochen</span>
                <span class="highlight" id="total-w">0</span>
            </div>
            <div class="stat-row">
                <span>Gesamt Tage</span>
                <span class="highlight" id="total-d">0</span>
            </div>
        </div>

        <div class="widget">
            <span class="w-title">Kommende Events</span>
            
            <div class="event-box">
                <div class="event-header">
                    <span>üéÇ Geburtstag (05.11.)</span>
                    <span id="txt-bday">...</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill fill-bday" id="bar-bday" style="width:0%"></div>
                </div>
            </div>

            <div class="event-box" style="margin-bottom:0;">
                <div class="event-header">
                    <span>üå∏ Namenstag (30.05.)</span>
                    <span id="txt-name">...</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill fill-name" id="bar-name" style="width:0%"></div>
                </div>
            </div>
        </div>

        <div class="widget">
            <span class="w-title">Geburtsdaten</span>
            <div class="stat-row">
                <span>üìç Ort</span>
                <span>Innsbruck</span>
            </div>
            <div class="stat-row">
                <span>‚è∞ Uhrzeit</span>
                <span>23:25 Uhr</span>
            </div>
            <div class="stat-row">
                <span>‚öñÔ∏è Gewicht</span>
                <span>3060g</span>
            </div>
        </div>
        
        <div style="height:50px"></div> </div>

    <script>
        // --- KONFIGURATION ---
        const CONFIG = {
            pin: "0511",
            dob: new Date("2025-11-05T23:25:00"), 
            nameday: { d: 30, m: 5 } // 30. Mai
        };

        // --- PIN SYSTEM ---
        let pinBuffer = "";
        
        function tapPin(n) {
            if(pinBuffer.length < 4) {
                pinBuffer += n;
                updatePinUI();
                if(pinBuffer.length === 4) {
                    setTimeout(checkPin, 200);
                }
            }
        }

        function delPin() {
            pinBuffer = pinBuffer.slice(0, -1);
            updatePinUI();
        }

        function updatePinUI() {
            for(let i=1; i<=4; i++) {
                const el = document.getElementById('d'+i);
                if(i <= pinBuffer.length) el.classList.add('filled');
                else el.classList.remove('filled');
            }
        }

        function checkPin() {
            if(pinBuffer === CONFIG.pin) {
                // Success
                document.getElementById('pin-screen').classList.add('hidden');
                document.getElementById('app-screen').classList.remove('hidden');
                initApp();
            } else {
                // Fail Animation
                const wrap = document.querySelector('.pin-wrapper');
                wrap.style.transform = "translateX(20px)";
                setTimeout(() => wrap.style.transform = "translateX(-20px)", 100);
                setTimeout(() => wrap.style.transform = "translateX(0)", 200);
                pinBuffer = "";
                updatePinUI();
            }
        }

        // --- APP LOGIC ---
        function initApp() {
            createHearts();
            updateLoop();
            setInterval(updateLoop, 1000);
        }

        function updateLoop() {
            const now = new Date();
            const birth = CONFIG.dob;

            // -- 1. Exaktes Alter (Jahre/Monate/Tage/Stunden Logik f√ºr Rest) --
            let years = now.getFullYear() - birth.getFullYear();
            let months = now.getMonth() - birth.getMonth();
            let days = now.getDate() - birth.getDate();

            if (days < 0) {
                months--;
                // Tage des Vormonats addieren
                days += new Date(now.getFullYear(), now.getMonth(), 0).getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }

            // F√ºr die Wochenanzeige im oberen Widget: "Resttage / 7"
            // Da oben "Wochen" und "Tage" separat stehen, rechnen wir
            // die 'days' (Resttage des Monats) in Wochen und Tage um.
            let restWeeks = Math.floor(days / 7);
            let restDays = days % 7;

            document.getElementById('y').innerText = years;
            document.getElementById('m').innerText = months;
            document.getElementById('w').innerText = restWeeks;
            document.getElementById('d').innerText = restDays;


            // -- 2. Statistik (Gesamt) --
            // Gesamt-Tage
            const msPerDay = 1000 * 60 * 60 * 24;
            const diffTime = now - birth;
            const totalDays = Math.floor(diffTime / msPerDay);
            
            // Gesamt-Wochen
            const totalWeeks = Math.floor(totalDays / 7);

            // Gesamt-Monate (Exakt nach Kalender)
            let totalMonths = (years * 12) + months;

            document.getElementById('total-m').innerText = totalMonths.toLocaleString();
            document.getElementById('total-w').innerText = totalWeeks.toLocaleString();
            document.getElementById('total-d').innerText = totalDays.toLocaleString();


            // -- 3. Fortschrittsbalken Geburtstag --
            updateProgress(
                now, 
                birth.getDate(), 
                birth.getMonth(), 
                'txt-bday', 
                'bar-bday'
            );

            // -- 4. Fortschrittsbalken Namenstag --
            updateProgress(
                now, 
                CONFIG.nameday.d, 
                CONFIG.nameday.m - 1, // JS Monate sind 0-basiert
                'txt-name', 
                'bar-name'
            );
        }

        function updateProgress(now, targetDay, targetMonth, textId, barId) {
            // N√§chstes Zieldatum finden
            let target = new Date(now.getFullYear(), targetMonth, targetDay);
            let lastTarget = new Date(now.getFullYear() - 1, targetMonth, targetDay);
            
            // Wenn das Datum dieses Jahr schon vorbei ist, ist das Ziel n√§chstes Jahr
            // Das "letzte" Ereignis war dann dieses Jahr
            if (now > target && now.getDate() !== target.getDate()) {
                target.setFullYear(now.getFullYear() + 1);
                lastTarget.setFullYear(now.getFullYear());
            }

            // Differenz berechnen
            const totalSpan = target - lastTarget;
            const elapsed = now - lastTarget;
            let percent = (elapsed / totalSpan) * 100;

            // Resttage berechnen
            const diffMs = target - now;
            const daysLeft = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
            
            // Text Logik
            let txt = daysLeft + " Tage";
            if (daysLeft === 0 || (now.getDate() === targetDay && now.getMonth() === targetMonth)) {
                txt = "HEUTE! üéâ";
                percent = 100;
            } else if (daysLeft > 360) {
                // Kurz nach dem Event
                percent = 1; 
            }

            document.getElementById(textId).innerText = txt;
            document.getElementById(barId).style.width = percent + "%";
        }

        // --- BACKGROUND HEARTS ---
        function createHearts() {
            const container = document.getElementById('bg-animation');
            // Initiale Herzen
            for(let i=0; i<15; i++) spawnHeart(container);
            // Nachschub
            setInterval(() => spawnHeart(container), 2000);
        }

        function spawnHeart(container) {
            const h = document.createElement('div');
            h.classList.add('heart');
            h.innerText = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'ü§ç';
            h.style.left = Math.random() * 100 + "vw";
            h.style.animationDuration = (Math.random() * 5 + 5) + "s"; // 5-10s
            h.style.fontSize = (Math.random() * 20 + 10) + "px";
            container.appendChild(h);
            
            setTimeout(() => h.remove(), 10000);
        }

    </script>
</body>
</html>
